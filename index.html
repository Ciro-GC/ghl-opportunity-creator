<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>GHL Opportunity Creator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="container">
    <header>
      <h1>DS2D Opportunity Creator</h1>
    </header>

    <div class="section-box">
      <label for="pipelineDropdown">Select Pipeline:</label>
      <select id="pipelineDropdown">
        <option value="">-- Loading pipelines... --</option>
      </select>

      <label for="stageDropdown" style="margin-top:12px;">Select Stage:</label>
      <select id="stageDropdown" disabled>
        <option value="">-- Select a pipeline first --</option>
      </select>
    </div>

    <!-- Pre-fetch filter: Refills Coming Due -->
    <div class="section-box" id="refills-filter-container">
      <h2>Refills Filter</h2>
      <label for="refillsDaysInput">Refills Coming Due in the Next</label>
      <input type="number" id="refillsDaysInput" placeholder="e.g. 30" min="1">
      <label>days</label>
    </div>

    <div class="button-group">
      <button id="getDataBtn" onclick="fetchData()">Get Data</button>
    </div>

    <!-- Optional client-side filters AFTER data is loaded -->
    <div class="section-box">
      <h2>Advanced Filters</h2>
      <div id="filters-container"></div>
      <button onclick="addFilterRow()">+ Add Filter</button>
      <button onclick="applyFilters()">Apply Filters</button>
    </div>

    <div id="message"></div>
    <div id="mvp-table-container"></div>
    <button id="createOpportunityBtn" onclick="createOpportunitiesFromTable()" disabled>Create Opportunity</button>
  </div>

  <script src="script.js"></script>
</body>
</html>
